{% extends 'base.html' %}
{% load static %}

{% block content %}

<body>
    <header>
        <!-- Sessão -->
        <div class="bg-light py-5">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-8 text-dark">
                        <h2 class="display-6">Descubra livros e insights sobre tecnologia</h2>
                        <p class="lead">Resenhas, guias práticos e reflexões para desenvolvedores e leitores ávidos —
                            novos posts toda semana.</p>
                    </div>
                </div>
            </div>
        </div>
        <div >
            {% for post in posts %}
                <div class="border rounded p-3 mb-4 bg-white mx-4">
                    <a href="{% url 'books_tech:post_detail' post.pk %}" class="text-decoration-none">
                        {% if post.imagem %}<img class="py-2" src="{{ post.imagem.url }}" alt="{{ post.titulo }}"
                            style="max-width: 200px; max-height: 400px;">{% else %}Sem imagem{% endif %} <br>
                        {{ post.titulo }}</a> - {{ post.autor.first_name}} {{ post.autor.last_name}} <br>

                    <div class="d-flex gap-2 my-2">
                        {% if post.autor == request.user %}
                            <a href="{% url 'books_tech:update_post' post.pk %}" class="btn btn-primary btn-sm">Editar</a>
                            <a href="{% url 'books_tech:delete_post' post.pk %}" class="btn btn-danger btn-sm">Apagar</a>
                        {% endif %}
                    </div>
                    {% if messages %}
                        <div class="container mt-3">
                            {% for message in messages %}
                            <div class="alert alert-{{ message.tags }} text-center">
                                {{ message }}
                            </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                    {{ post.conteudo|truncatechars:250 }}<br>
                    {{ post.criado_em }} <br>
                </div>
            {% endfor %}
        </div>
    </header>



    <script src="{% static 'books_tech/js/nav.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</body>
{% endblock %}