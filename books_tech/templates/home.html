{% extends 'base.html' %}
{% load static %}

{% block content %}
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ category.nome }}</title>
    <link rel="stylesheet" href="{% static 'books_tech/css/home.css' %}">
</head>
<body>
    <header>
        <!-- Sessão -->
        <div class="bg-light py-5">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-8 text-dark">
                        <h2 class="display-6">Descubra livros e insights sobre tecnologia</h2>
                        <p class="lead">Resenhas, guias práticos e reflexões para desenvolvedores e leitores ávidos —
                            novos posts toda semana.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="container my-4">
            {% if home_notice %}
                <div class="alert alert-{{ home_notice_level }} mx-4" role="alert">
                    {{ home_notice }}
                </div>
            {% endif %}
            {% for post in posts %}
                <div class="border rounded p-3 mb-4 bg-white mx-4">
                    <a href="{% url 'books_tech:post_detail' post.pk %}" class="text-decoration-none">
                        {% if post.imagem %}
                            <div class="post-thumb mb-2">
                                <img src="{{ post.imagem.url }}" alt="{{ post.titulo }}" style="--obj-pos: {{ post.imagem_posicao }};">
                            </div>
                        {% else %}
                            <div class="post-thumb mb-2">
                                <img src="{% static 'img/icon_image.png' %}" alt="{{ post.titulo }}">
                            </div>
                        {% endif %} <br>
                        {{ post.titulo }}</a>{% if post.categoria %} -
                        <a href="{% url 'books_tech:categoria_posts' post.categoria.nome|slugify %}">{{post.categoria.nome}}</a>{% endif %} <br>
                        <!--a href="">
                        </a--> 
                            {{ post.autor.first_name}} 
                            {{ post.autor.last_name}} 
                        <br>
                    <div class="d-flex gap-2 my-2">
                        <a href="{% url 'books_tech:update_post' post.pk %}" class="btn btn-primary btn-sm">Editar</a>
                        <a href="{% url 'books_tech:delete_post' post.pk %}" class="btn btn-danger btn-sm">Apagar</a>
                    </div>
                    {{ post.conteudo|truncatechars:250 }}<br>
                    <small class="text-muted">{{ post.criado_em|date:"d/m/Y \à\s H:i" }}</small><br>
                </div>
            {% endfor %}
        </div>
    </header>



    <script src="{% static 'books_tech/js/nav.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</body>
{% endblock %}