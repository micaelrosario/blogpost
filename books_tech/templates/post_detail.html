{% extends 'base.html' %}
{% load static %}

{% block title %}{{ post.titulo }}{% endblock %}

{% block content %}
<div class="container my-4">
    <article class="card m-2">
        <div class="card-body">
            {% if post.imagem %}
            <div class="card-image"><img src="{{ post.imagem.url }}" alt="{{ post.titulo }}"
                    style="max-width: 200px; max-height: 400px;"></div>
            {% endif %}
            <h1 class="py-1">{{ post.titulo }}</h1>
            {% load tz %}
            {% load date_filters %}
            <p class="meta">{{ post.criado_em|pretty_date }} — {{ post.autor }} — <a
                    href="{% url 'books_tech:update_post' post.pk %}"> Editar </a> -

                <a href="{% url 'books_tech:delete_post' post.pk %}" class="text-danger"> Deletar </a>
                {% if request.GET.delete_error %}
                    <div class="alert alert-danger mt-3 text-center">
                        Você não pode deletar este post.
                    </div>
                {% endif %}
                {% if request.GET.edit_error %}
                    <div class="alert alert-danger mt-3 text-center">
                        Você não pode editar este post.
                    </div>
                {% endif %}
            </p>
            <div>{{ post.conteudo|linebreaks }}</div>
        </div>
    </article>
    <!--a href="{% url 'books_tech:home_view' %}" class="btn btn-secondary m-2 text-light">
        Voltar
    </a-->
    <hr>
    <div class="mt-3 pb-5">
        <h2>Comentários</h2>
        <ul>
            {% for comentario in post.comentarios.all %}
                <strong>{{ comentario.autor }} - {{ comentario.criado_em|date:"d/m/Y H:i" }}</strong>
                <br> {{ comentario.texto }}
            {% empty %}
                <li>Não há comentários.</li>
            {% endfor %}
        </ul>
    </div>
    <hr>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"></script>
{% endblock %}